# log-file=~~/mpv.log
msg-level=auto_profiles=warn,autocrop=warn,autoload=warn,cplayer=warn

script-opts-append=autocrop-auto=no
script-opts-append=autocrop-detect_round=4
script-opts-append=autocrop-detect_min_ratio=0.74
script-opts-append=autocrop-suppress_osd=yes
script-opts-append=autocrop-keybind=

script-opts-append=uosc-window_border_size=0
script-opts-append=uosc-top_bar_persistency=idle
script-opts-append=uosc-top_bar_position=no
script-opts-append=uosc-controls=
script-opts-append=uosc-timeline_persistency=
script-opts-append=uosc-timeline_style=bar
script-opts-append=uosc-chapter_ranges=openings:81cfff80,endings:81cfff80,ads:ffe26480
script-opts-append=uosc-foreground=fffbfe
script-opts-append=uosc-foreground_text=1c1b1f
script-opts-append=uosc-background=1c1b1f
script-opts-append=uosc-background_text=fffbfe
script-opts-append=uosc-languages=~~/zh-hans-ex.json,zh-hans

script-opts-append=uosc-ui_scale=1.2
script-opts-append=uosc-menu_item_height=48
script-opts-append=uosc-menu_item_height_fullscreen=48
script-opts-append=uosc-menu_min_width=200
script-opts-append=uosc-menu_min_width_fullscreen=200
script-opts-append=uosc-top_bar_size=40
script-opts-append=uosc-top_bar_size_fullscreen=40
script-opts-append=uosc-volume_size=40
script-opts-append=uosc-volume_size_fullscreen=40
script-opts-append=uosc-controls_size=32
script-opts-append=uosc-controls_size_fullscreen=32
script-opts-append=uosc-timeline_size_min=0
script-opts-append=uosc-timeline_size_min_fullscreen=0
script-opts-append=uosc-timeline_size_max=40
script-opts-append=uosc-timeline_size_max_fullscreen=40

script-opts-append=thumbfast-max_width=320
script-opts-append=thumbfast-max_height=320

osd-font=Segoe UI Variable Display
script-opts-append=stats-font=

no-osc
no-osd-bar
no-border

snap-window
autofit-larger=100%x88%
autofit-smaller=33%x66%

keep-open
save-position-on-quit
resume-playback-check-mtime
watch-later-options=start,pause,volume,mute,vid,aid,sid
reset-on-next-file=pause,loop-file,deinterlace,vf,af,brightness,contrast,gamma,saturation,hue

input-default-bindings=no
input-doubleclick-time=200

image-display-duration=inf

screenshot-template="%{media-title}-%p-%n"
screenshot-format=avif

audio-file-auto=fuzzy
alang=ja,jpn,en,eng,zh,zho,chi

sub-auto=fuzzy
slang=zh-hans,zh-cn,zh-hans-cn,zh-sg,zh-hans-sg,sc,chs,zh-hant,zh-hk,zh-hant-hk,zh-mo,zh-hant-mo,zh-tw,zh-hant-tw,tc,cht,zh,zho,chi,en,eng,ja,jpn

subs-with-matching-audio=yes
subs-fallback=default

sub-font-size=36
sub-back-color=0.0/0.0/0.0/0.75
sub-border-size=0
sub-shadow-offset=4
sub-shadow-color=0.0/0.0/0.0/0.0

hwdec

vo=gpu-next

glsl-shader=~~/shaders/hdeband.glsl

glsl-shader=~~/shaders/ravu-zoom-r3.glsl
glsl-shader=~~/shaders/KrigBilateral.glsl

scale=ewa_lanczos
sigmoid-upscaling

dscale=lanczos
correct-downscaling

glsl-shader=~~/shaders/SSimSuperRes.glsl
glsl-shader=~~/shaders/SSimDownscaler.glsl

# tone-mapping=clip
gamut-mapping-mode=clip

# dither-depth=auto
dither-depth=8

# video-sync=display-resample

# interpolation
# tscale=oversample

[bt.2100-pq]
profile-cond=get("video-params/primaries") == "bt.2020" and get("video-params/gamma") == "pq"
profile-restore=copy
target-prim=bt.2020
target-trc=pq
glsl-shader=~~/shaders/hdr-toys/utils/clip_both.glsl
glsl-shader=~~/shaders/hdr-toys/transfer-function/pq_to_l.glsl
glsl-shader=~~/shaders/hdr-toys/transfer-function/l_to_linear.glsl
glsl-shader=~~/shaders/hdr-toys/utils/chroma_correction.glsl
glsl-shader=~~/shaders/hdr-toys/tone-mapping/dynamic.glsl
glsl-shader=~~/shaders/hdr-toys/gamut-mapping/jedypod.glsl
glsl-shader=~~/shaders/hdr-toys/transfer-function/linear_to_bt1886.glsl

[bt.2100-hlg]
profile-cond=get("video-params/primaries") == "bt.2020" and get("video-params/gamma") == "hlg"
profile-restore=copy
target-prim=bt.2020
target-trc=hlg
glsl-shader=~~/shaders/hdr-toys/utils/clip_both.glsl
glsl-shader=~~/shaders/hdr-toys/transfer-function/hlg_to_l.glsl
glsl-shader=~~/shaders/hdr-toys/transfer-function/l_to_linear.glsl
glsl-shader=~~/shaders/hdr-toys/utils/chroma_correction.glsl
glsl-shader=~~/shaders/hdr-toys/tone-mapping/dynamic.glsl
glsl-shader=~~/shaders/hdr-toys/gamut-mapping/jedypod.glsl
glsl-shader=~~/shaders/hdr-toys/transfer-function/linear_to_bt1886.glsl

[bt.2020]
profile-cond=get("video-params/primaries") == "bt.2020" and get("video-params/gamma") == "bt.1886"
profile-restore=copy
target-prim=bt.2020
target-trc=bt.1886
glsl-shader=~~/shaders/hdr-toys/transfer-function/bt1886_to_linear.glsl
glsl-shader=~~/shaders/hdr-toys/gamut-mapping/bottosson.glsl
glsl-shader=~~/shaders/hdr-toys/transfer-function/linear_to_bt1886.glsl

[interp]
hr-seek-framedrop=no
vf-add=@interp:vapoursynth=~~/filters/interp.py:1

[interp-inverse]
hr-seek-framedrop
vf-add=@interp:!vapoursynth=~~/filters/interp.py:1

[interlaced]
profile-cond=deinterlace or (get("video-frame-info/interlaced") and not deinterlace)
profile-restore=copy-equal
deinterlace

[low-res]
profile-cond=width * height <= 1280 * 720
profile-restore=copy-equal
glsl-shaders-pre=~~/shaders/adaptive-sharpen.glsl
glsl-shaders-pre=~~/shaders/nlmeans.glsl

[short]
profile-cond=duration <= 60 or time_remaining <= duration / 8
profile-restore=copy-equal
save-position-on-quit=no

[loop]
profile-cond=duration <= 60 and get("current-tracks/video/image") == false
profile-restore=copy-equal
loop-file=inf

[audio]
profile-cond=aid and not get("current-tracks/video/albumart") == false
profile-restore=copy-equal
prefetch-playlist

[image]
profile-cond=get("current-tracks/video/image")
profile-restore=copy-equal
script-opts-append=inputevent-configs=input.conf,~~/input.image.conf

[gray]
profile-cond=get("video-params/pixelformat") == "gray"
profile-restore=copy-equal
dscale=gaussian
glsl-shaders=

[idle]
profile-cond=idle_active
profile-restore=copy-equal
script-opts-append=inputevent-configs=input.conf,~~/input.idle.conf

[background]
profile-cond=not focused and get("current-tracks/video/albumart") == false
profile-restore=copy-equal
pause

[end]
profile-cond=eof_reached
profile-restore=copy-equal
fullscreen=no
window-maximized=no
